// Generated by CoffeeScript 1.4.0
(function() {
  var Search,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  jQuery(document).ready(function($) {
    var search;
    return search = new Search;
  });

  Search = (function() {

    Search.prototype.inputs = null;

    Search.prototype.container = null;

    Search.prototype.url = null;

    function Search() {
      this.search = __bind(this.search, this);
      this.inputs = $('form#search input');
      console.log(this.inputs);
      this.container = $("#table-container");
      this.url = this.inputs.closest('form').attr('action');
      console.log(this.url);
      this.inputs.bind('keyup', this.search);
      this.inputs.bind('change', this.search);
    }

    Search.prototype.search = function(e) {
      var values,
        _this = this;
      e.preventDefault();
      values = {};
      this.inputs.each(function(index, item) {
        if (item.value) {
          return values[$(item).attr('name')] = item.value;
        }
      });
      return this.post = $.ajax({
        url: this.url,
        type: "POST",
        data: values
      }).done(function(response) {
        console.log(response);
        return _this.container.html(response);
      }).fail(function(jqHXR, response) {
        return console.log(response);
      });
    };

    return Search;

  })();

}).call(this);
